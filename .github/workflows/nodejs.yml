name: Node CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@master
    - name: Use Node.js 10.x
      uses: actions/setup-node@v1
      with:
        version: 10.x
    - name: npm install, deploy, and test
      run: |
        npm install
        parcel build --public-url '/last-lime' src/index.html
  publish:
    steps:
      - name: Push to gh-pages
        uses: "ludeeus/action-push@master"
        env: {
          ACTION_MAIL: "danieldoblado@gmail.com"
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ACTION_NAME: "Daniel Doblado"
          ACTION_BRANCH: "gh-pages"
          ACTION_MESSAGE: "Commit to gh-pages"
        }
        secrets: ["GITHUB_TOKEN"]
        
        
